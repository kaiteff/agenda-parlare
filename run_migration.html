<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejecutar Migración</title>
</head>
<body>
    <h1>Migración de Datos</h1>
    <button id="runBtn" style="padding: 20px; font-size: 18px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Ejecutar Migración
    </button>
    <div id="output" style="margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 5px; font-family: monospace; white-space: pre-wrap;"></div>

    <script type="module">
        import { runMigration } from './js/migrate_data.js';
        
        document.getElementById('runBtn').addEventListener('click', async () => {
            const output = document.getElementById('output');
            const btn = document.getElementById('runBtn');
            
            btn.disabled = true;
            btn.textContent = 'Ejecutando...';
            output.textContent = 'Iniciando migración...\n';
            
            // Capturar console.log
            const originalLog = console.log;
            console.log = (...args) => {
                output.textContent += args.join(' ') + '\n';
                originalLog(...args);
            };
            
            try {
                await runMigration();
                output.textContent += '\n✅ Migración completada exitosamente!';
            } catch (error) {
                output.textContent += '\n❌ Error: ' + error.message;
                console.error(error);
            } finally {
                console.log = originalLog;
                btn.disabled = false;
                btn.textContent = 'Ejecutar Migración';
            }
        });
    </script>
</body>
</html>
